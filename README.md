# @open-node/uploader
大文件分片上传，客户端SDK

<pre>npm i @open-node/uploader --save</pre>

## Usage

```js
const axios = require("axios");
const Uploader = require("./uploader");

const main = async () => {
  const headers = {
    "X-Auth-Token": "thisisatoken",
    "X-Auth-AppId": "i03n111cgy"
  };
  const uploader = new Uploader(axios, "/api_v1/app/files/slices", headers);
  uploader.changeOpt("chunkSize", 2 * 1024 * 1024);

  const input = document.getElementById("myfile");
  input.onchange = async e => {
    console.log(e);
    const file = await uploader.upload(
      e.target.files[0],
      console.log.bind(console, "Progress changed log")
    );
    console.log("Upload file success: %o", file);
  };
};

main();
```



<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Uploader][1]
    -   [Parameters][2]
    -   [md5][3]
        -   [Parameters][4]
    -   [upload][5]
        -   [Parameters][6]
    -   [changeOpt][7]
        -   [Parameters][8]

## Uploader

### Parameters

-   `axios` **[object][9]** axios 发起请求库包
-   `url` **[string][10]** 上传地址
-   `headers`
-   `token` **[string][10]** 身份认证信息，会通过头信息 X-Auth-Token 提交

Returns **[Uploader][11]** Instance

### md5

计算文件MD5值

#### Parameters

-   `file` **File** HTML5 选择文件后的对象

Returns **[string][10]** 文件md5 hash值

### upload

执行文件分片上传

#### Parameters

-   `file` **File** HTML5 选择后的文件对象
-   `changed` **[Function][12]** 上传进度百分比变化调用函数

Returns **[Response][13]** 服务端上传完毕返回值

### changeOpt

读取/修改设置

#### Parameters

-   `key` **[string][10]** 设置项目
-   `value` **any** 设置的值

Returns **void**

[1]: #uploader

[2]: #parameters

[3]: #md5

[4]: #parameters-1

[5]: #upload

[6]: #parameters-2

[7]: #changeopt

[8]: #parameters-3

[9]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[10]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[11]: #uploader

[12]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[13]: https://developer.mozilla.org/docs/Web/Guide/HTML/HTML5
